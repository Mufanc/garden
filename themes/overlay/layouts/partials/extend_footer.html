<script>
    document.querySelectorAll('.highlight pre').forEach(pre => {
        if (pre.scrollHeight == pre.clientHeight) return

        const div = document.createElement('div')
        div.innerHTML = '<i class="fa-solid fa-caret-down"></i>'
        div.classList.add('expand-btn')
        div.querySelector('i').addEventListener('click', () => {
            if (div.classList.contains('expand-done')) {
                div.classList.remove('expand-done')
            } else {
                div.classList.add('expand-done')
            }
        })

        pre.parentNode.insertBefore(div, pre)
        pre.style.setProperty('--code-height', pre.scrollHeight + 'px')
    })
</script>