<!-- Windi CSS -->
{{- $windi := (resources.Get "css/windi.css") }}
<link rel="stylesheet" href="{{ $windi.RelPermalink }}" />

<!-- Font Awesome Icons -->
<link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
/>

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
    href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&family=Noto+Sans+Mono&family=Noto+Serif+SC:wght@400;700&display=swap"
    rel="stylesheet"
/>

<!-- Mermaid -->
{{ if .Params.mermaid }}
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    window.addEventListener('load', () => {
        mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    })
</script>
{{ end }}

<!-- Custom Styles -->
<style>
    .post-single {
        font-family: 'Noto Sans Mono', 'Noto Color Emoji', 'Noto Serif CJK SC', system-ui;
    }

    .post-entry h2 {
        font-weight: inherit;
    }

    .post-content {
        text-align: justify;
    }
    :is(.post-content, details) > p {
        text-indent: 2em;
    }
    .post-content code {
        margin: 0;
    }
    .post-content :is(pre, code) {
        font-family: 'Consolas';
    }
    .post-content img {
        margin: 0 auto;
    }

    .prose {
        font-size: inherit;
        max-width: initial;
    }
    .prose strong {
        font-weight: bold;
    }

    .highlight:has(.expand-btn) {
        padding-bottom: 2em;
    }
    .highlight pre {
        /* 代码高度限制 */
        max-height: calc(1.7142857em * 15 + 1em);
        overflow-y: hidden;
        overflow-x: auto;
        outline: none;
        transition: all .2s ease-in-out;
    }
    .highlight .expand-btn:not(.expand-done) + pre::-webkit-scrollbar {
        height: 0.4em;
    }
    .highlight pre > code {
        width: max-content;
    }
    code.language-mermaid {
        display: flex !important;
        align-items: center;
        justify-content: center;
        padding: 1em 0 !important;
    }
    code.language-mermaid + .copy-code {
        /* 隐藏 mermaid 的「复制代码」按钮 */
        display: none;
    }
    .highlight .expand-done + pre {
        max-height: var(--code-height)
    }
    .highlight .expand-btn {
        position: absolute;
        z-index: 1;
        bottom: 0;
        width: 100%;
        height: 2em;
        display: flex;
        justify-content: center;
        align-items: center;
        transform: scaleY(1);
        transition: all .2s ease-in-out;
    }
    .highlight .expand-btn.expand-done {
        transform: scaleY(-1);
    }
    .highlight .expand-btn > i {
        color: white;
        text-align: center;
        width: 4em;
        position: relative;
        animation: 1s ease-in-out floating infinite;
    }
    .highlight .expand-btn > i::after {
        content: "";
        position: absolute;
        left: 0;
        top: -50%;
        width: 100%;
        height: 2em;
    }

    @keyframes floating {
        0% {
            transform: translateY(-10%);
        }

        50% {
            transform: translateY(10%);
        }

        100% {
            transform: translateY(-10%);
        }
    }
</style>
